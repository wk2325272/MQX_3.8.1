;version 1.00, 02/06/2012, Copyright P&E Microcomputer Systems, www.pemicro.com [mk_256k_dx_pflash_dflash_eeprom_p1]
;device freescale, k20dx256m7, pflash_dflash_eeprom
;begin_cs device=$00000000, length=$14000800, ram=$20000000
;end_cs
REQUIRES_PROG_VERSION=1.03/
NO_ON_CHIP_RAM
DO_MASS_ERASE_AND_RESET       ;Perform MDM Mass erase
NO_TIMING_TEST                
WRITE_LONG=00FF003F/4001F000/ ;Disable Master0..2 prefetching
WRITE_LONG=30020000/4001F004/ ;Disable Cache and Prefetching on Flash Bank 0
WRITE_LONG=30020000/4001F008/ ;Disable Cache and Prefetching on Flash Bank 1
WRITE_LONG=FFFFFFFF/40020010/ ;All PFlash protection off
WRITE_WORD=FFFF/40020016/     ;All DFlash and EEPROM protection off
BLANK_MODULE_ONLY
BOUNDARY_MASK=FFFFF800/
BLOCKING_MASK=00000003/
NO_BASE_ADDRESS=00000000/
ADDR_RANGE=00000000/0003FFFF/00/FFFFFFFC/FFFFF800/     ; $00000000-$0003FFFF P-Flash
ADDR_RANGE=10000000/10007FFF/00/FFFFFFFC/FFFFF800/     ; $10000000-$10007FFF D-Flash
ADDR_RANGE=14000000/140007FF/00/FFFFFFFC/FFFFF800/     ; $14000000-$140007FF EEPROM if partitioned
TEST_VALUE=00/0000040C/00000033/00000020/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000021/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/ 
TEST_VALUE=00/0000040C/00000033/00000023/00/003/007/Data that is about to be programmed will permanently secure the device. Continue?/
; turn off watchdog timer
WRITE_LONG=4005200E/1FFFFF00/ ; dc32 0x4005200E      ;wdog unlock address
WRITE_LONG=40052000/1FFFFF04/ ; dc32 0x40052000      ;wdog control_h
WRITE_LONG=500CF85F/1FFFFF08/ ; ldr  r5,w_unlock_loc ;get wdog unlock address 
WRITE_LONG=600CF85F/1FFFFF0C/ ; ldr  r6,w_control_h  ;get wdog control address
WRITE_LONG=5820F24C/1FFFFF10/ ; mov  r8,#0xC520      ;get constants
WRITE_LONG=1928F64D/1FFFFF14/ ; mov  r9,#0xD928
WRITE_LONG=0A02F04F/1FFFFF18/ ; mov  r10,#0x0002
WRITE_LONG=8000F8A5/1FFFFF1C/ ; strh r8,[r5]         ;unlock wdog
WRITE_LONG=9000F8A5/1FFFFF20/ ; strh r9,[r5]
WRITE_WORD=BF00/1FFFFF24/     ; nop                  ;timing
WRITE_LONG=A000F8A6/1FFFFF26/ ; strh r10,[r6]        ;turn wdog off
WRITE_WORD=BE00/1FFFFF2A/     ; bkpt #0x0 
SET_PC_AND_RUN=1FFFFF08/      ; disable software watchdog
PUT_REGFILE=00/1FFFFF00/              ;Address in SRAM_LOW for timing routine
ICS_RANGE=000312500/000382000/000006400/ ICS Range (LSB = decimal place)
09BIT_TRIM=40064002/40064003/01/000003FF/000003FE/01400000/
USER=SD Secure Device      0          /00000000/00000000/
USER=PA Partition          4ERPART:DE>/00000000/00003F0E/ ER<=$3F, DE<=$0E

S02900006D6B5F3235366B5F64785F70666C6173685F64666C6173685F656570726F6D5F70312E733139BC
S31520000000F4040020F40C002000080000000000008A
S315200000100008001400000000A001002000000000DD
S3152000002000000000660100201602002016020020B3
S31520000030D2000020D4000020F8000020000000009C
S315200000400000000000000000860300209E03002020
S31520000050008000000060000000400000000000005A
S31520000060000000000000000000000000000000006A
S31520000070000000000020000000400000008000007A
S3152000008000000000000000000000000000800000CA
S315200000900000000000000000000000000008000032
S315200000A000040000000200000001000080000000A3
S315200000B040000000200000000000000000000000BA
S315200000C0000000000000000000000000000000000A
S315200000D000BE00BE00BE4FF070062E70FC4EEE80B5
S315200000E04FF080062E7000BF2E7816F08006FBD0CB
S315200000F02A7812F07002F746E64D0FF2E82808F14A
S315200001000108C04712F07002002A1ED1E84C002CCC
S315200001100DD0EFA64FF401473780AFF2460808F11D
S315200001200108C04712F07002002A0ED100BEE8A6D0
S3152000013048F2FF173780AFF2620808F10108C0477E
S3152000014012F07002002A00D100BED54A00BE4FF040
S315200001500402E24BDD4FD7F80080CF4E08EA0606B0
S315200001601E60DA4957E04FF070062E704FF04406B5
S31520000170EE714FF080062E7000BF2E7816F08006A6
S31520000180FBD02A7812F07002002A08D10FF25428E8
S3152000019008F10108C04712F07002002AD7D000BE2D
S315200001A0CA4E4FF6FF774FF6FE794FF000014FF417
S315200001B080228A4631F8028BB24503D1C84529D11F
S315200001C0921EF6E7B84525D1921EF2D1B949BA4A10
S315200001D0002A05D031F8028BB8451BD1921EF9D1E1
S315200001E0B249B34C002C15D0B9A64FF4014737803D
S315200001F0AFF21E1808F10108C04712F07002002A5B
S3152000020008D122464FF6FF7731F8028BB84501D147
S31520000210921EF9D100BE14464FF070062E70A74EDE
S31520000220B1421CDBAAA64FF401473780AFF25A1819
S3152000023008F10108C04712F07002002A0ED153F8C7
S3152000024004AB41F804AB6E7816F00106FBD02A7891
S3152000025012F0700202D1241F002CF0D100BE9CA601
S3152000026048F2FF173780AFF2921808F10108C0470D
S3152000027012F07002002AF1D18A4F01EA0707BB4625
S31520000280BBF5802F03DB2BF0805B4BF4000B4FF488
S315200002900079934E57F804AB46F804ABB9F101093F
S315200002A0F8D14FF070062E70C5F804B04FF009064D
S315200002B0EE714FF080062E7000BF2E7816F0800665
S315200002C0FBD02A7812F070025CD1BBF5000F15DB4B
S315200002D04FF070062E700BF58068C5F804804FF03D
S315200002E00906EE714FF080062E7000BF2E7816F0AC
S315200002F08006FBD02A7812F0700243D1784E0F4642
S31520000300DFF8A48107EA08073E4453F804AB46F811
S3152000031004AB01F10401241F03D016EA080900D01A
S31520000320F3E74FF400786E4F644E4FF4807957F818
S3152000033004AB46F804ABB9F10109F8D1BBF5000FBF
S3152000034002DB4FF4807601E04FF080066E81C5F81F
S3152000035004B04FF00B06EE714FF080062E7000BFF2
S315200003602E7816F08006FBD02A7812F0700209D17A
S315200003700BF5806BB8F58078B8F1000FD4D1002C3E
S315200003807FF47AAF00BE4FF00402544B4F4FD7F89C
S315200003900080424E08EA06061E604C493BE74FF0B5
S315200003A070062E704FF08006EE7104F47C564FEAEC
S315200003B01626EE7204F00F06AE724FF080062E70EF
S315200003C000BF2E7816F08006FBD02A7812F0700235
S315200003D0002A06D10FF20C0808F10108C04712F0D6
S315200003E0700200BE4FF070062E703B4C6C604FF0D2
S315200003F00306EE714FF00006EE734FF080062E7066
S3152000040000BF2E7816F08006FBD02A7812F07002F4
S315200004102C8943F60F7634402EA634604FEA1424F6
S3152000042004F00F044FEA8404AFF29C362644346865
S31520000430002C0AD01EA63460204E214C26441C4C8B
S31520000440A6EB040619A4266005E04FF0000617A4C3
S31520000450266017A426601F4C14F00F040F2C0ED014
S31520000460002C0CD0082C0FD0072C0DD04FEA84047A
S31520000470AFF22446264434680FA6346008E00EA462
S315200004804FF40046266003E00BA44FF000062660DA
S31520000490F746000000000240FEFFFFFFFCFFFFFFC3
S315200004A0FFFFFFFF00F8FFFFFF070000000000002E
S315200004B00000000000000010008000000000001472
S315200004C00008000000000000000800140C040000D2
S315200004D0FF810000FFFFFFFFFC008000F40C0020DE
S315200004E0F40400200E200540002005405FF80C5043
S315200004F05FF80C604CF220584DF628194FF0020A8E
S31520000500A5F80080A5F8009000BFA6F800A000BEC0
S70520000000DA
åa